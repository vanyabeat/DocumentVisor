<Window x:Class="DocumentVisor.MainWindow" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:view="clr-namespace:DocumentVisor.View"
        mc:Ignorable="d"
        ResizeMode="NoResize" xmlns:viewModel="clr-namespace:DocumentVisor.ViewModel"
        xmlns:visualBasic="clr-namespace:Microsoft.VisualBasic;assembly=Microsoft.VisualBasic.Core"
        d:DataContext="{d:DesignInstance Type=viewModel:DataManageVm}"
        Title="DocumentVisor" Height="720" Width="1280"
        x:Name="DocumentVisorWindow">
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary
                    Source="/Resources/StringResource.xaml" ></ResourceDictionary>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Window.Resources>
    <Grid>
        <TabControl Name="MainWindowTabControl" SelectedItem="{Binding SelectedTabItem}">
            <TabItem Name="QueryTab" Header="{StaticResource Queries}">
                <view:QueryView></view:QueryView>
            </TabItem>
            <TabItem Name="PersonsTab" Header="{StaticResource Persons}">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="0.4*"></ColumnDefinition>
                        <ColumnDefinition Width="*"></ColumnDefinition>
                    </Grid.ColumnDefinitions>
                    <ListView x:Name="PersonsListView" Grid.Column="1" SelectedItem="{Binding SelectedPerson}" ItemsSource="{Binding AllPersons}">
                        <ListView.View>
                            <GridView>
                                <GridViewColumn Width="150" Header="{StaticResource PersonName}" DisplayMemberBinding="{Binding Path=Name}"></GridViewColumn>
                                <GridViewColumn Width="150" Header="{StaticResource PersonInfo}" DisplayMemberBinding="{Binding Path=Info}"></GridViewColumn>
                                <GridViewColumn Width="100" Header="{StaticResource PersonPhone}" DisplayMemberBinding="{Binding Path=Phone}"></GridViewColumn>
                                <GridViewColumn Width="100" Header="{StaticResource PersonType}" DisplayMemberBinding="{Binding Path=PersonType}"></GridViewColumn>
                            </GridView>
                        </ListView.View>
                        <ListView.ContextMenu>
                            <ContextMenu>
                                <MenuItem Header="{StaticResource Delete }" Command="{Binding DeleteItem}" CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=UserControl}}">
                                    <MenuItem.Icon>
                                        <Image>
                                            <Image.Source>
                                                <BitmapImage UriSource="../Resources/del.png"></BitmapImage>
                                            </Image.Source>
                                        </Image>
                                    </MenuItem.Icon>
                                </MenuItem>
                            </ContextMenu>
                        </ListView.ContextMenu>
                    </ListView>
                    <StackPanel Grid.Column="0">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="0.3*"></ColumnDefinition>
                                <ColumnDefinition Width="*"></ColumnDefinition>
                            </Grid.ColumnDefinitions>
                            <Label Margin="5">
                                <StaticResource ResourceKey="PersonName"></StaticResource>
                            </Label>
                            <TextBox Name="PersonNameTextBox" Text="{Binding PersonName}" Grid.Column="1" Margin="5"></TextBox>
                        </Grid>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="0.3*"></ColumnDefinition>
                                <ColumnDefinition Width="*"></ColumnDefinition>
                            </Grid.ColumnDefinitions>
                            <Label Margin="5">
                                <StaticResource ResourceKey="PersonInfo"></StaticResource>
                            </Label>
                            <TextBox Name="PersonInfoTextBox" Text="{Binding PersonInfo}" Grid.Column="1" Margin="5"></TextBox>
                        </Grid>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="0.3*"></ColumnDefinition>
                                <ColumnDefinition Width="*"></ColumnDefinition>
                            </Grid.ColumnDefinitions>
                            <Label Margin="5">
                                <StaticResource ResourceKey="PersonPhone"></StaticResource>
                            </Label>
                            <TextBox Name="PersonPhoneTextBox" Text="{Binding PersonPhone}" Grid.Column="1" Margin="5"></TextBox>
                        </Grid>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="0.3*"></ColumnDefinition>
                                <ColumnDefinition Width="*"></ColumnDefinition>
                            </Grid.ColumnDefinitions>
                            <Label Margin="5">
                                <StaticResource ResourceKey="PersonType"></StaticResource>
                            </Label>
                            <ComboBox Name="PersonTypeComboBox" ItemsSource="{Binding AllPersonTypes}" DisplayMemberPath="Name" SelectedItem="{Binding PersonType}" Grid.Column="1" Margin="5"></ComboBox>
                        </Grid>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="0.45*"></ColumnDefinition>
                                <ColumnDefinition Width="0.1*"></ColumnDefinition>
                                <ColumnDefinition Width="0.45*"></ColumnDefinition>
                            </Grid.ColumnDefinitions>
                            <Button Grid.Column="0" Content="{StaticResource Insert}" Command="{Binding AddNewPerson}" 
                                    CommandParameter="{Binding ElementName=DocumentVisorWindow}"/>
                            <Button Grid.Column="2" Content="{StaticResource Delete}" Command="{Binding DeleteItem}"/>
                        </Grid>
                    </StackPanel>
                </Grid>
            </TabItem>
            <TabItem Name="PersonTypesTab" Header="{StaticResource PersonTypes}">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="0.4*"></ColumnDefinition>
                        <ColumnDefinition Width="*"></ColumnDefinition>
                    </Grid.ColumnDefinitions>
                    <DataGrid x:Name="PersonTypesDataGrid" Grid.Column="1"
                              SelectedItem="{Binding SelectedPersonType}"
                              ItemsSource="{Binding AllPersonTypes}"
                              AutoGenerateColumns="False"
                              CanUserAddRows="False">

                            <DataGrid.Columns>
                            <DataGridTextColumn Header="{StaticResource PersonTypeName}" Width="175" 
                                                    Binding="{Binding Path=Name}"></DataGridTextColumn>
                            <DataGridTextColumn Header="{StaticResource PersonTypeInfo}" 
                                                    Binding="{Binding Path=Info}"></DataGridTextColumn>
                        </DataGrid.Columns>
                        <DataGrid.InputBindings>
                            <KeyBinding Key="Delete" Command="{Binding DeleteItem}" 
                                        CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}"/>
                        </DataGrid.InputBindings>

                    </DataGrid>
                    <StackPanel x:Name="PersonTypeStackPanel" Grid.Column="0">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="0.3*"></ColumnDefinition>
                                <ColumnDefinition Width="*"></ColumnDefinition>
                            </Grid.ColumnDefinitions>
                            <Label Margin="5" Content="{StaticResource PersonTypeName}"/>
                            <TextBox Name="PersonTypeNameTextBox" Text="{Binding PersonTypeName}" Grid.Column="1" Margin="5,5,5,5"></TextBox>
                        </Grid>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="13*"></ColumnDefinition>
                                <ColumnDefinition Width="29*"/>
                                <ColumnDefinition Width="140*"></ColumnDefinition>
                            </Grid.ColumnDefinitions>
                            <Label Margin="5" Content="{StaticResource PersonTypeInfo}" Grid.ColumnSpan="2"/>
                            <TextBox Name="PersonTypeInfoTextBox" Text="{Binding PersonTypeInfo}" Grid.Column="2" Margin="5,5,5,5"></TextBox>
                        </Grid>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="0.45*"></ColumnDefinition>
                                <ColumnDefinition Width="0.1*"></ColumnDefinition>
                                <ColumnDefinition Width="0.45*"></ColumnDefinition>
                            </Grid.ColumnDefinitions>
                            <Button Grid.Column="0" Content="{StaticResource Insert}" Command="{Binding AddNewPersonType}"
                                    CommandParameter="{Binding ElementName=DocumentVisorWindow}"/>
                            <Button Grid.Column="2" Content="{StaticResource Delete}" Command="{Binding DeleteItem}" CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}"/>
                        </Grid>
                    </StackPanel>
                </Grid>
            </TabItem>
            <TabItem Header="{StaticResource Privacies}"/>
            <TabItem Header="{StaticResource Themes}"/>
        </TabControl>
    </Grid>
</Window>